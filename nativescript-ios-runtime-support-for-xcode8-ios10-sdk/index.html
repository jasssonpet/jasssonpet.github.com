<!DOCTYPE HTML> <html> <head> <meta charset="utf-8"> <title>NativeScript iOS Runtime Support for Xcode 8/iOS 10 SDK | Jason Zhekov&#39;s Blog</title> <meta name="author" content="Jason Zhekov"> <meta name="description" content="Xcode 8 is just around the block and will soon come as a recommended Apple update to all of you. Here we’ll see what implications will this have on your NativeScript development workflow."> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <meta property="og:title" content="NativeScript iOS Runtime Support for Xcode 8/iOS 10 SDK"> <meta property="og:site_name" content="Jason Zhekov&#39;s Blog"> <meta property="og:image" content="undefined"> <link href="/favicon.png" rel="icon"> <link rel="alternate" href="/atom.xml" title="Jason Zhekov&#39;s Blog" type="application/atom+xml"> <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"> <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> </head></html> <body> <header id="header" class="inner"><div class="alignleft"> <h1><a href="/">Jason Zhekov&#39;s Blog</a></h1> <h2><a href="/"></a></h2> </div> <nav id="main-nav" class="alignright"> <ul> <li><a href="/">Home</a></li> <li><a href="/archives">Archives</a></li> <li><a href="/about-me">About</a></li> </ul> <div class="clearfix"></div> </nav> <div class="clearfix"></div></header> <div id="content" class="inner"> <div id="main-col"><div id="wrapper"><article class="post"> <div class="post-content"> <header> <div class="icon"></div> <time datetime="2016-09-13T21:00:00.000Z"><a href="/nativescript-ios-runtime-support-for-xcode8-ios10-sdk/">2016-09-14</a></time> <h1 class="title">NativeScript iOS Runtime Support for Xcode 8/iOS 10 SDK</h1> </header> <div class="entry"> <p><a href="https://developer.apple.com/xcode/">Xcode 8</a> is just around the block and will soon come as a recommended Apple update to all of you. Here we’ll see what implications will this have on your NativeScript development workflow.</p> <a id="more"></a> <p>This Xcode release comes with <a href="https://developer.apple.com/library/content/releasenotes/DeveloperTools/RN-Xcode/Introduction.html">many new features</a> such as runtime issues, thread sanitizer, visual native memory debugging, simplified code signing and many more that can be also quite useful for your NativeScript applications, but in this post we are going to focus on a more specific topic - the latest iOS SDK. Xcode 8 comes with the iOS 10 SDK and this is what you’ll be using to build and <a href="https://github.com/NativeScript/ios-runtime-docs/blob/master/Overview.md#metadata">generate metadata</a> for your applications.</p> <blockquote> <p>Don’t worry, applications built with the iOS 10 SDK can be still deployed on devices with lower OS versions down to the deployment target of the application which is iOS 8 by default as of now.</p> </blockquote> <h2 id="Class-Properties"><a href="#Class-Properties" class="headerlink" title="Class Properties"></a>Class Properties</h2><p>There are many <a href="https://developer.apple.com/library/content/releasenotes/General/iOS10APIDiffs/">API differences</a> between the iOS 9 and the iOS 10 SDKs, but there is one specific change that we want to inform you about and that will likely affect many of you who use iOS APIs in your JavaScript modules. And that is many Objective-C static methods have been upgraded to the newely introduced <a href="https://developer.apple.com/videos/play/wwdc2016/405/?time=305">Objective-C class properties syntax</a>.</p> <p>Here is an example:<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// In Xcode 7/iOS 9 SDK currentDevice is declared as a static method.</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIDevice</span> : <span class="title">NSObject</span></span></div><div class="line">+ (<span class="built_in">UIDevice</span> *)currentDevice;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="comment">// In Xcode 8/iOS 10 SDK this is changed to a static property.</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIDevice</span> : <span class="title">NSObject</span></span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">class</span>, <span class="keyword">readonly</span>) <span class="built_in">UIDevice</span> *currentDevice;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p> <p>And here are the JavaScript projections that you can call from NativeScript:<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// When building with Xcode 7/iOS 9 SDK</span></div><div class="line"><span class="keyword">class</span> UIDevice extends NSObject &#123;</div><div class="line">    <span class="keyword">static</span> currentDevice(): UIDevice;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// When building with Xcode 8/iOS 10 SDK</span></div><div class="line"><span class="keyword">class</span> UIDevice extends NSObject &#123;</div><div class="line">    <span class="keyword">static</span> readonly currentDevice: UIDevice;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p> <p>What this means is that you have to change all <code>UIDevice.currentDevice()</code> calls to <code>UIDevice.currentDevice</code> in your JavaScript code when building with Xcode 8.</p> <p>To help you make this transition easier, we have also updated our <a href="https://jasssonpet.github.io/generating-typescript-declarations-in-nativescript-for-javascript-coffeescript-code-completion/">TypeScript generator tool</a> to support the iOS 10 SDK. Please make use of it even if you are not fond of TypeScript - these declarations can be used from most IDEs that support JavaScript completion and will help you catch such changes at compile time.</p> <h2 id="Recommended-Migration-Path"><a href="#Recommended-Migration-Path" class="headerlink" title="Recommended Migration Path"></a>Recommended Migration Path</h2><p>Here are our suggestions:</p> <ul> <li>Update to Xcode 8 and make it your default coding environment. Make sure it is set as the active command line tool.</li> <li>Update your apps with the 2.3 release of the iOS runtime, NativeScript Core modules and NativeScript CLI. They have the required changes to support Xcode 8.</li> <li>If you are a plugin developer:<ul> <li>Build and test your plugins to be compatible with the iOS 10 SDK.</li> <li>Make any needed changes to the native iOS APIs calls in your JavaScript files.</li> <li>Republish your plugins and update the system requirements to Xcode 8.</li> </ul> </li> <li>If you are an application developer:<ul> <li>Build and test your application to be compatible with the iOS 10 SDK.</li> <li>Make any needed changes to the native iOS APIs calls in your JavaScript files.</li> <li>If you are using plugins that are not yet updated for Xcode 8, contact the respective plugin maintainers or make a PR for that.</li> </ul> </li> </ul> <p>SDK updates can be a bit frustrating, but we are hoping that Xcode 8 will be the new default soon.</p> </div> <footer> <div class="clearfix"></div> </footer> </div> </article></div></div> </div> <footer id="footer" class="inner"><div class="alignleft"> &copy; 2016 Jason Zhekov </div> <div class="clearfix"></div></footer> </body> 